<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="catalogo">

    <!-- ============================= -->
    <!-- ROLES                         -->
    <!-- ============================= -->
    <select id="obtener-roles" resultType="pojo.Rol">
        SELECT idRol, nombre 
        FROM Rol 
    </select>

    <!-- ============================= -->
    <!-- ESTATUS                       -->
    <!-- ============================= -->
    <select id="obtener-estatus" resultType="pojo.Estatus">
        SELECT idEstatus, nombre, descripcion 
        FROM Estatus
    </select>

    <!-- ============================= -->
    <!-- SUCURSALES ACTIVAS            -->
    <!-- ============================= -->
    <select id="obtener-sucursales" resultType="pojo.Sucursal">
        SELECT idSucursal, codigo, nombre, estatus, idDireccion 
        FROM Sucursal 
        WHERE estatus = 'Activa'
    </select>

    <!-- ============================= -->
    <!-- UNIDADES ACTIVAS (no asignadas o asignadas a conductor) -->
    <!-- ============================= -->
    <select id="obtener-unidades-activas" resultType="pojo.Unidad">
        SELECT idUnidad, marca, modelo, anio, vin, 
               tipoUnidad, numeroIdentificacionInterno, 
               estatus, motivoBaja  
        FROM Unidad 
        WHERE estatus = 'Activa' 
    </select>

    <!-- ============================= -->
    <!-- CONDUCTORES                   -->
    <!-- ============================= -->
    <select id="obtener-conductores" resultType="pojo.Colaborador">
        SELECT idColaborador, noPersonal, nombre, apellidoPaterno, 
               apellidoMaterno, curp, correo, telefono,  
               password, numeroLicencia, idRol, idSucursal 
        FROM Colaborador
        WHERE idRol = 3  <!-- 3 = Conductor -->
    </select>

</mapper>
